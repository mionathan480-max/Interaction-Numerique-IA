<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IA ‚Üî Photographie ‚Äî G√©n√©rateur de prompt</title>

  <style>
    :root{
      --bg1:#0F172A;
      --bg2:#2563EB;
      --bg3:#38BDF8;
      --card: rgba(255,255,255,.08);
      --border: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --shadow: 0 20px 50px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue";
      color:var(--text);
      background: linear-gradient(45deg, var(--bg1), var(--bg2), var(--bg3));
      background-attachment: fixed;
    }
    .wrap{max-width:1100px;margin:0 auto;padding:32px 16px 40px}
    .hero{padding:10px 0 18px}
    .badge{
      display:inline-block;
      padding:8px 12px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.18);
      border-radius:999px;
      font-size:12px;
      letter-spacing:.4px;
    }
    h1{margin:12px 0 6px;font-size:42px;line-height:1.05}
    .subtitle{margin:0;max-width:75ch;color:var(--muted)}
    .card{
      margin-top:18px;
      border:1px solid var(--border);
      background: var(--card);
      border-radius:22px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow:hidden;
    }
    .grid{display:grid;grid-template-columns: 1fr 1fr;}
    @media (max-width: 900px){.grid{grid-template-columns:1fr}}
    .panel{padding:22px 22px 18px;border-right:1px solid var(--border)}
    .grid .panel:last-child{border-right:none;border-top:1px solid var(--border)}
    @media (min-width: 901px){.grid .panel:last-child{border-top:none}}
    h2{margin:0 0 14px;font-size:18px;letter-spacing:.2px}
    .label{display:block;margin:14px 0 8px;color:var(--muted);font-size:13px}
    .drop{
      display:block;
      border:1px dashed rgba(255,255,255,.3);
      border-radius:18px;
      padding:18px;
      cursor:pointer;
      background: rgba(0,0,0,.12);
    }
    .drop input{display:none}
    .dropInner{display:flex;align-items:center;gap:14px}
    .icon{
      width:38px;height:38px;border-radius:12px;
      display:grid;place-items:center;
      border:1px solid var(--border);
      background: rgba(255,255,255,.08);
    }
    .preview{margin-top:14px;display:grid;gap:8px}
    .preview img{
      width:100%;
      max-height:260px;
      object-fit:cover;
      border-radius:16px;
      border:1px solid var(--border);
      display:none;
    }
    .muted{color:var(--muted)}
    .small{font-size:12px}
    .hint{
      margin-top:10px;
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius:14px;
      background: rgba(0,0,0,.10);
      color:var(--muted);
      font-size:12px;
      line-height:1.35;
    }
    textarea, input[type="text"]{
      width:100%;
      border-radius:16px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding:12px 12px;
      outline:none;
    }
    textarea{min-height:110px;resize:vertical}
    textarea::placeholder, input::placeholder{color:rgba(255,255,255,.45)}
    .row{display:flex;gap:10px;align-items:center;margin-top:12px;flex-wrap:wrap}
    .btn{
      border:1px solid var(--border);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      user-select:none;
    }
    .btn[disabled], .btn[aria-disabled="true"]{
      opacity:.5;cursor:not-allowed;pointer-events:none
    }
    .btn.primary{
      background: rgba(255,255,255,.12);
      border-color: rgba(255,255,255,.22);
    }
    .qrWrap{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}
    .qrCard{
      border:1px solid var(--border);
      background: rgba(0,0,0,.14);
      border-radius:16px;
      padding:10px;
    }
    .qrTitle{font-size:12px;color:var(--muted);margin-bottom:8px}
    canvas{background:white;border-radius:10px}
    .footer{
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      color:var(--muted);
      font-size:12px;
    }
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--border); background: rgba(0,0,0,.14);
      color:var(--muted); font-size:12px;
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;}
    .hr{height:1px;background:rgba(255,255,255,.18);margin:14px 0}
  </style>
</head>

<body>
  <main class="wrap">
    <header class="hero">
      <div class="badge">DN MADE ‚Äî Exp√©rience interactive</div>
      <h1>IA ‚Üî Photographie</h1>
      <p class="subtitle">
        Upload une photo ‚Üí √©cris (ou colle) une description ‚Üí le site g√©n√®re un prompt propre ‚Üí QR vers ChatGPT.
      </p>
      <div class="row" style="margin-top:10px">
        <span class="pill">‚ö° Ultra simple</span>
        <span class="pill">üß† Prompt ‚Üí image</span>
        <span class="pill">üì∏ Comparaison r√©el / reconstruction</span>
      </div>
    </header>

    <section class="card grid">
      <!-- Colonne gauche -->
      <div class="panel">
        <h2>1) Image (upload)</h2>

        <label class="drop" id="dropZone">
          <input id="fileInput" type="file" accept="image/*" capture="environment" />
          <div class="dropInner">
            <div class="icon">‚¨Ü</div>
            <div>
              <strong>Choisir une image</strong>
              <div class="muted">JPG/PNG ‚Äî t√©l√©phone OK</div>
            </div>
          </div>
        </label>

        <div class="preview">
          <img id="previewImg" alt="Aper√ßu" />
          <div class="muted" id="fileMeta"></div>
        </div>

        <div class="hr"></div>

        <h2>2) Description (ce que ‚Äúvoit‚Äù l‚ÄôIA)</h2>
        <label class="label">D√©cris ton image en 2‚Äì5 phrases</label>
        <textarea id="descInput" placeholder="Ex : Une jeune femme en manteau beige tient un appareil photo dans une rue parisienne au cr√©puscule, lumi√®res de rue, arri√®re-plan flou‚Ä¶"></textarea>

        <label class="label">Option : Mots-cl√©s (facultatif)</label>
        <input id="tagsInput" type="text" placeholder="Ex : Paris, argentique, 35mm, bokeh, golden hour, documentaire" />

        <div class="row">
          <button id="genBtn" class="btn primary" disabled>G√©n√©rer le prompt</button>
          <button id="demoFillBtn" class="btn" disabled>Auto-remplir (exemple)</button>
        </div>

        <div class="hint">
          <strong>Pourquoi √ßa marche pour ton projet :</strong><br/>
          Tu montres que l‚Äôimage g√©n√©r√©e n‚Äôest pas la photo originale, mais une <em>reconstruction</em> √† partir du langage.
          Ensuite tu compares : photo r√©elle ‚Üí description ‚Üí image g√©n√©r√©e.
        </div>
      </div>

      <!-- Colonne droite -->
      <div class="panel">
        <h2>3) Prompt final + QR</h2>

        <label class="label">Prompt (√† utiliser dans ChatGPT pour g√©n√©rer l‚Äôimage)</label>
        <textarea id="promptBox" placeholder="Le prompt appara√Ætra ici‚Ä¶" readonly></textarea>

        <div class="row">
          <button id="copyBtn" class="btn" disabled>Copier le prompt</button>
          <a id="openChatgpt" class="btn primary" href="#" target="_blank" rel="noreferrer" aria-disabled="true">
            Ouvrir ChatGPT
          </a>
        </div>

        <div class="hint">
          <strong>Instruction √† √©crire dans ChatGPT :</strong><br/>
          <span class="mono">‚ÄúG√©n√®re une image √† partir de ce prompt‚Äù</span> ou utilise directement l‚Äôoutil image.
        </div>

        <div class="qrWrap">
          <div class="qrCard">
            <div class="qrTitle">QR ‚Üí ChatGPT (prompt pr√©-rempli)</div>
            <canvas id="qrChatgpt"></canvas>
          </div>
          <div class="qrCard">
            <div class="qrTitle">QR ‚Üí ce site</div>
            <canvas id="qrSite"></canvas>
          </div>
        </div>

        <p class="muted small">
          Note : selon le t√©l√©phone, le pr√©-remplissage via URL peut varier.
          Sinon : copie/colle le prompt, c‚Äôest nickel.
        </p>
      </div>
    </section>

    <footer class="footer">
      <span>¬© Projet DN MADE ‚Äî IA & photographie</span>
      <span class="muted">Prototype v1</span>
    </footer>
  </main>

  <!-- QR code lib (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <script>
    const fileInput  = document.getElementById("fileInput");
    const previewImg = document.getElementById("previewImg");
    const fileMeta   = document.getElementById("fileMeta");

    const descInput  = document.getElementById("descInput");
    const tagsInput  = document.getElementById("tagsInput");

    const genBtn     = document.getElementById("genBtn");
    const demoFillBtn= document.getElementById("demoFillBtn");

    const promptBox  = document.getElementById("promptBox");
    const copyBtn    = document.getElementById("copyBtn");
    const openChatgpt= document.getElementById("openChatgpt");

    const qrChatgpt  = document.getElementById("qrChatgpt");
    const qrSite     = document.getElementById("qrSite");

    let hasFile = false;
    const SITE_URL = window.location.href;

    function setEnabled(enabled){
      genBtn.disabled = !enabled;
      demoFillBtn.disabled = !enabled;
    }

    function buildPrompt(description, tags){
      const tagsLine = tags ? `Keywords: ${tags}\n` : "";
      return [
        "Create a photorealistic image based on the description below.",
        "",
        `Description: ${description}`,
        tagsLine.trim(),
        "",
        "Style: documentary photography, candid, natural imperfections, subtle film grain",
        "Camera: 35mm lens, shallow depth of field, realistic skin texture",
        "Lighting: natural light (golden hour if relevant), cinematic but true-to-life",
        "Composition: realistic framing, believable environment details",
        "Negative: extra fingers, warped hands, plastic skin, unreadable text, distorted faces"
      ].filter(Boolean).join("\\n");
    }

    function setResult(prompt){
      promptBox.value = prompt || "";
      copyBtn.disabled = !prompt;

      // URL ChatGPT avec param q (souvent OK)
      const chatgptUrl = "https://chatgpt.com/?q=" + encodeURIComponent(prompt || "");
      openChatgpt.href = chatgptUrl;
      openChatgpt.setAttribute("aria-disabled", prompt ? "false" : "true");

      // QR codes
      QRCode.toCanvas(qrChatgpt, chatgptUrl, { width: 170, margin: 1 });
      QRCode.toCanvas(qrSite, SITE_URL, { width: 170, margin: 1 });
    }

    fileInput.addEventListener("change", () => {
      const file = fileInput.files?.[0];
      if(!file) return;

      hasFile = true;
      setEnabled(true);

      fileMeta.textContent = `${file.name} ‚Äî ${(file.size/1024/1024).toFixed(2)} MB`;

      const url = URL.createObjectURL(file);
      previewImg.src = url;
      previewImg.style.display = "block";
    });

    demoFillBtn.addEventListener("click", () => {
      if(!hasFile) return;
      descInput.value = "Une jeune femme aux cheveux ch√¢tain clair tient un appareil photo dans une rue pav√©e de Paris au cr√©puscule. Les immeubles haussmanniens et les lampadaires cr√©ent un arri√®re-plan flou avec des lumi√®res chaudes.";
      tagsInput.value = "Paris, 35mm, bokeh, twilight, documentary, film grain";
    });

    genBtn.addEventListener("click", () => {
      const desc = (descInput.value || "").trim();
      const tags = (tagsInput.value || "").trim();

      if(!desc){
        alert("Ajoute une description (2‚Äì5 phrases) pour g√©n√©rer un prompt.");
        return;
      }
      const prompt = buildPrompt(desc, tags);
      setResult(prompt);
    });

    copyBtn.addEventListener("click", async () => {
      await navigator.clipboard.writeText(promptBox.value);
      copyBtn.textContent = "Copi√© ‚úÖ";
      setTimeout(() => (copyBtn.textContent = "Copier le prompt"), 1200);
    });

    // init
    setResult("");
  </script>
</body>
</html>